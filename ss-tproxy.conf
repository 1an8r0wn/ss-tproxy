## mode
#mode='global'  # 全局：除了 {保留地址, ignlist.ext} 其余的都走代理
#mode='gfwlist' # 黑名单：只代理 {gfwlist.txt, gfwlist.ext} 中指定的域名和IP；回国模式(chnlist)也是用这个
mode='chnroute' # 大陆白名单：除了 {保留地址, ignlist.ext, chnroute} 其余的都走代理，域名解析由chinadns-ng负责

## ipv4/6
ipv4='true'     # 是否对ipv4启用'透明代理': true启用 false不启用
ipv6='false'    # 是否对ipv6启用'透明代理': true启用 false不启用

## tproxy
tproxy='false'  # true: TPROXY(tcp) + TPROXY(udp) ##纯tproxy模式##
                # false: REDIRECT(tcp) + TPROXY(udp) ##redirect模式##
                # 具体取决于'本机代理进程'的透明代理传入'协议'
                # ss/ssr/trojan 通常为 redirect模式
                # v2ray 两者都支持，具体取决于v2ray配置
                # ipt2socks 默认为 纯tproxy模式 也可切换为 redirect模式
                # ss-libev 3.3.5+ 支持 纯tproxy模式，参数为"-T"、"tcp_tproxy": true

## tcponly
tcponly='false' # true:仅代理TCP流量; false:代理TCP和UDP流量
                # 这个也取决与'代理套件'，有些代理不支持UDP协议
                # 如果代理支持UDP，但不稳，建议禁用，避免DNS解析不畅

## selfonly
selfonly='false' # true:仅代理本机流量; false:代理本机及"内网"流量
                 # 本机是必须要走代理的，因为dns相关处理都在本机进行
                 # "内网"是指"网关"和"DNS"都指向"本机"的那些局域网机器

## proxy
#
# 有两种放行模式："user/group"(推荐)、"远程代理服务器地址"
#
# user和group二选一，可以都填，但不建议，不可以root或0，相关细节看readme
proxy_procuser='proxy'   # 本机代理进程的 user/uid，用来放行本机代理进程传出的流量
proxy_procgroup=''       # 本机代理进程的 group/gid，用来放行本机代理进程传出的流量
#
# 远程代理服务器地址，现在不建议使用此放行模式了，建议切换到user/group模式
proxy_svraddr4=()        # 服务器的 IPv4 地址或域名，允许填写多个服务器地址，空格隔开
proxy_svraddr6=()        # 服务器的 IPv6 地址或域名，允许填写多个服务器地址，空格隔开
proxy_svrport=''         # 服务器的监听端口，可填多个端口，格式同 ipts_proxy_dst_port
#
# '本机代理进程'相关信息，如透明代理端口，进程启动和停止命令
proxy_tcpport='60080'    # ss/ssr/v2ray/ipt2socks 等本机进程的 TCP 监听端口，该端口支持"透明代理"
proxy_udpport='60080'    # ss/ssr/v2ray/ipt2socks 等本机进程的 UDP 监听端口，该端口支持"透明代理"
proxy_startcmd='cmd'     # 用于启动本机代理进程(组)的 shell 命令行，该命令行不应该执行过长时间
proxy_stopcmd='cmd'      # 用于关闭本机代理进程(组)的 shell 命令行，该命令行不应该执行过长时间

## dns
dns_direct='223.5.5.5'                # 直连DNS(v4环境使用)，不能指定端口(resolv.conf不支持)
dns_direct6='240C::6666'              # 直连DNS(v6环境使用)，不能指定端口(resolv.conf不支持)
dns_remote='8.8.8.8#53'               # 远程DNS(v4环境使用)，必须指定端口，访问远程DNS会走代理
dns_remote6='2001:4860:4860::8888#53' # 远程DNS(v6环境使用)，必须指定端口，访问远程DNS会走代理

## dnsmasq
dnsmasq_bind_port='53'                  # 监听端口，若 53 被占用，请注意更改
dnsmasq_cache_size='4096'               # DNS 缓存大小，大小为 0 表示禁用缓存
dnsmasq_cache_time='3600'               # DNS 缓存时间，单位是秒，最大 3600 秒
dnsmasq_query_maxcnt='1024'             # 设置并发 DNS 查询的最大数量，默认为 150
dnsmasq_log_enable='false'              # 记录详细日志，除非进行调试，否则不建议启用
dnsmasq_log_file='/var/log/dnsmasq.log' # 日志文件，如果不想保存日志可以改为 /dev/null
dnsmasq_conf_dir=()                     # `--conf-dir` 选项的参数，可以填多个，空格隔开
dnsmasq_conf_file=()                    # `--conf-file` 选项的参数，可以填多个，空格隔开
dnsmasq_conf_string=()                  # 自定义配置，一个数组元素就是一行配置，空格隔开

## chinadns
chinadns_bind_port='65353'               # 监听端口，若 65353 被占用，请注意更改
chinadns_timeout='5'                     # 等待上游 DNS 返回响应的超时时间，单位为秒
chinadns_repeat='1'                      # 向可信 DNS 发送几次 DNS 查询请求，默认为 1
chinadns_fairmode='true'                 # 公平模式(2023.03.06开始，此选项没有实际效果)
chinadns_gfwlist_mode='true'             # 加载 gfwlist.txt/gfwlist.ext 黑名单域名
chinadns_chnlist_mode='true'             # 加载 chndomain.txt/chndomain.ext 白名单域名
chinadns_chnlist_first='false'           # 优先加载 chndomain.txt/chndomain.ext 白名单域名
chinadns_noip_as_chnip='false'           # 启用 chinadns-ng 的 `--noip-as-chnip` 选项
chinadns_extra_options=''                # chinadns-ng 其他额外参数，与命令行的格式相同
chinadns_verbose='false'                 # 记录详细日志，除非进行调试，否则不建议启用
chinadns_logfile='/var/log/chinadns.log' # 日志文件，如果不想保存日志可以改为 /dev/null
chinadns_privaddr4=()                    # 被允许的v4保留地址(段)，多个空格隔开，具体见下
chinadns_privaddr6=()                    # 被允许的v6保留地址(段)，多个空格隔开，具体见下
                                         # chinadns-ng会对china上游的响应进行ip属地判断
                                         # 如果ip是大陆ip则接受，否则拒绝(采用可信上游结果)
                                         # 判断的依据就是查询ip是否在chnroute/chnroute6集合
                                         # 若希望将特定保留地址判定为大陆ip，请添加至上述列表

## dns2tcp
dns2tcp_bind_port='65454'               # 监听端口，若 65454 被占用，请注意更改
dns2tcp_tcp_syncnt=''                   # dns2tcp `-s` 选项，留空表示不设置此选项
dns2tcp_tcp_quickack='false'            # dns2tcp `-a` 选项，取值为 true/false
dns2tcp_tcp_fastopen='false'            # dns2tcp `-f` 选项，取值为 true/false
dns2tcp_extra_options=''                # dns2tcp 其他扩展选项，与命令行的格式相同
dns2tcp_verbose='false'                 # 记录详细日志，除非进行调试，否则不建议启用
dns2tcp_logfile='/var/log/dns2tcp.log'  # 日志文件，如果不想保存日志可以改为 /dev/null

## ipts
ipts_if_lo='lo'                 # 环回接口的名称，在标准发行版中，通常为 lo，如果不是请修改
ipts_rt_tab='233'               # iproute2 路由表名或表 ID，除非产生冲突，否则不建议改动该选项
ipts_rt_mark='0x2333'           # iproute2 策略路由的防火墙标记，除非产生冲突，否则不建议改动该选项
ipts_set_snat='false'           # 设置 iptables 的 MASQUERADE(SNAT) 规则，相关说明和用例见 README
ipts_set_snat6='false'          # 设置 ip6tables 的 MASQUERADE(SNAT) 规则，相关说明和用例见 README
ipts_reddns_onstop='true'       # stop 后，是否将其它主机发至本机的 DNS 重定向至直连 DNS，详见 README
ipts_proxy_dst_port='1:65535'   # 需要走代理的端口，多个用逗号隔开，冒号为端口范围(含边界)，详见 README

## opts
opts_ss_netstat='auto'                  # auto/ss/netstat，用哪个端口检测工具，见 README
opts_ping_cmd_to_use='auto'             # auto/standalone/parameter，ping 相关，见 README
opts_hostname_resolver='auto'           # auto/dig/getent/ping，用哪个解析工具，见 README
opts_overwrite_resolv='false'           # true/false/留空，如何操作 resolv.conf，见 README
opts_ip_for_check_net='223.5.5.5'       # 检测公网是否可访问的 IP (ping)，留空表示跳过此检查

## file
file_gfwlist_txt='/etc/ss-tproxy/gfwlist.txt'      # mode=gfwlist 黑名单(域名)
file_gfwlist_ext='/etc/ss-tproxy/gfwlist.ext'      # mode=gfwlist 黑名单扩展(域名、IP)
file_ignlist_ext='/etc/ss-tproxy/ignlist.ext'      # mode=global/chnroute 白名单(域名、IP)
file_chndomain_txt='/etc/ss-tproxy/chndomain.txt'  # mode=chnroute 大陆域名列表
file_chndomain_ext='/etc/ss-tproxy/chndomain.ext'  # mode=chnroute 大陆域名扩展列表
file_chnroute_set='/etc/ss-tproxy/chnroute.set'    # mode=chnroute 大陆IP段集合(v4)
file_chnroute6_set='/etc/ss-tproxy/chnroute6.set'  # mode=chnroute 大陆IP段集合(v6)
file_dnsserver_pid='/etc/ss-tproxy/.dnsserver.pid' # dns 服务器进程的 pid 文件 (shell)
